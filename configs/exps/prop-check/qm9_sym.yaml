job:
  mem: 24GB
  cpus: 4
  gres: gpu:rtx8000:1
  partition: long
  
default:
  test_ri: True
  cp_data_to_tmp_dir: True
  mode: train
  graph_rewiring: ""
  wandb_tags: rebuttal, sym-qm9, final
  wandb_project: ocp-qm9
  dataset:
    train:
      target: 6
      lse_shift: true
    val:
      target: 6
      lse_shift: true
    test:
      target: 6
      lse_shift: true
  optim:
    loss_energy: mse
    batch_size: 64
    eval_batch_size: 64
    max_epochs: 1500
    warmup_steps: 3000
    es_warmup_epochs: 600
    warmup_factor: 0.2
    lr_initial: 0.001
    initial_lr: 0.0003
    # parameters EMA
    ema_decay: 0.999
    # early stopping
    es_patience: 20
    es_min_abs_change: 0.000001
    es_warmup_epochs: 600
    scheduler: ReduceLROnPlateau
    mode: min
    factor: 0.9
    threshold: 0.0001
    threshold_mode: abs
    min_lr: 0.000001
    verbose: true
    patience: 15
  model:
    # PhAST
    phys_embeds: False
    phys_hidden_channels: 0
    energy_head: "" # "weighted-av-init-embeds", "weighted-av-final-embeds"
    pg_hidden_channels: 32
    tag_hidden_channels: 0
    # archi
    hidden_channels: 400
    num_filters: 480
    num_gaussians: 100
    num_interactions: 5
    cutoff: 6.0
    regress_forces: ""
    max_num_neighbors: 30
    # faenet
    skip_co: true # output skip connections
    second_layer_MLP: True # in EmbeddingBlock
    edge_embed_type: all_rij
    mp_type: updownscale_base 
    force_decoder_type: "" 
    force_decoder_model_config:
      simple:
        hidden_channels: 128
      mlp:
        hidden_channels: 256
    graph_norm: True
    complex_mp: True

runs:
  # - config: faenet-qm9-all
  #   note: '3D all'
  #   frame_averaging: 3D
  #   fa_frames: all
  - config: faenet-qm9-all
    note: '3D stocha'
    frame_averaging: 3D
    fa_frames: random
  - config: faenet-qm9-all
    note: 'No train 3D stocha'
    frame_averaging: 3D
    fa_frames: random
    optim:
      max_epochs: 0
  - config: faenet-qm9-all
    note: 'No DA/FA'
    frame_averaging: ""
  - config: faenet-qm9-all
    note: 'No train nor FA'
    optim:
      max_epochs: 0
    frame_averaging: ""
  - config: faenet-qm9-all
    note: 'se3-random'
    frame_averaging: 3D
    fa_frames: se3-random
  - config: faenet-qm9-all
    note: 'DA'
    frame_averaging: DA
  - config: faenet-qm9-all
    note: 'Little training no FA'
    frame_averaging: ""
    optim: 
      max_epochs: 50